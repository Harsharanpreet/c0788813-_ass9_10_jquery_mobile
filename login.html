<!DOCTYPE html> 
<html> 
	<head>
  <meta charset="UTF-8">	
	<title>Assignment 9-10 - Login</title> 
	
	<meta name="viewport" content="width=device-width, initial-scale=1"> 
	<link rel="stylesheet" href="jquery.mobile.structure-1.0.1.css" />
	<link rel="apple-touch-icon" href="images/launch_icon_57.png" />
	<link rel="apple-touch-icon" sizes="72x72" href="images/launch_icon_72.png" />
	<link rel="apple-touch-icon" sizes="114x114" href="images/launch_icon_114.png" />
	<link rel="stylesheet" href="jquery.mobile-1.0.1.css" />
	<link rel="stylesheet" href="custom.css" />
	<script src="js/jquery-1.7.1.min.js"></script>
	<script src="js/jquery.mobile-1.0.1.min.js"></script>
	<script src="js/project.js"></script>
</head> 

<body > 
<div data-role="page" id="home" data-theme="c">

	<div data-role="content">
	
	<div id="branding">
		<h1>Assignment 9-10 - Welcome</h1>
	</div>
	
	<div class="choice_list"> 
	<h3>Welcome  </h3>
	<h3>sign in</h3>
	<label for="txt-email">email address</label>
	<input type="email" name="txt-email" id="txtemail" value="" required>
	<label for="txt-password">password</label>
	<input type="password" name="txt-password" id="txtpassword" value="" required>
	
	<div data-role="controlgroup" data-type="horizontal">
		<a href="#" rel="external" data-role="button" id="loginbtn" data-theme="e">Login</a>
		<a href="register.html" rel="external" data-role="button" data-theme="b">Register</a>
		
		</div>

	<div data-role="popup" id="dlg-invalid-credentials" data-dismissible="false" style="max-width:400px;">
		<div role="main" class="ui-content">
			<h3 class="mc-text-danger"></h3>
			
			
		</div>
	</div>
	
	</div>
 
	</div>

</div><!-- /page -->
</body>
</html>

<script>
	//validation of form
$("#loginbtn").click(function(){
	var uname=$("#txtemail").val();
	var pwd=$("#txtpassword").val();


	var emailReg = /^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i;
    if(!emailReg.test(uname)) {
		alert("Check Email Address")
		$("#txtemail").focus()
        return;
    }
	else if(pwd.length==0)
	{
		alert("Password Cannot be blank")
		$("#txtpassword").focus()
        return;
	}



	valid=false;
	users = JSON.parse(sessionStorage.getItem("usermails"));
	passwords = JSON.parse(sessionStorage.getItem("pwds"));

	console.log(users[0]);
	console.log(passwords);
	
    for(i=0;i<users.length;i++)
	{
		if(users[i]==uname && passwords[i]==pwd)
		{
			valid=true;
			currentuser=i;
			break;
		}
	}

	if(valid==true)
	{
		
		sessionStorage.setItem("id", i);
		window.location="dashboard.html";
	}
	else
	{
		alert("PLease check user name/password!!!");
		return false;
	}
    
});


</script>
